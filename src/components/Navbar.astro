---
const whatsappUrl = "https://wa.me/628112230558";

// Get current path to highlight active nav
const currentPath = Astro.url.pathname;

const navLinks = [
    { href: "/", label: "Home" },
    { href: "/tentang", label: "Tentang Kami" },
    { href: "/produk", label: "Produk" },
    { href: "/galeri", label: "Galeri" },
];
---

<nav class="fixed w-full z-50 bg-white shadow-md transition-all duration-300" id="navbar">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="flex justify-between items-center h-20">
            <!-- Logo -->
            <a href="/" class="flex-shrink-0 flex items-center gap-2 cursor-pointer">
                <img src="https://placehold.co/150x50/0197B2/white?text=LOGO+ANDA" alt="Alus Factory Logo" class="h-10 w-auto object-contain">
                <span class="font-heading font-bold text-2xl text-secondary tracking-tight">ALUS<span class="text-primary">FACTORY</span></span>
            </a>

            <!-- Desktop Menu -->
            <div class="hidden md:flex space-x-8 items-center">
                {navLinks.map(link => (
                    <a 
                        href={link.href} 
                        class={`font-medium transition ${
                            currentPath === link.href || (currentPath === '/' && link.href === '/') 
                                ? 'text-primary' 
                                : 'text-secondary hover:text-primary'
                        }`}
                    >
                        {link.label}
                    </a>
                ))}
                <a href={whatsappUrl} target="_blank" class="bg-primary text-white px-5 py-2.5 rounded hover:bg-opacity-90 transition font-heading font-semibold shadow-lg shadow-primary/30">
                    Hubungi Kami
                </a>
            </div>

            <!-- Mobile Menu Button -->
            <div class="md:hidden flex items-center">
                <button id="mobile-menu-btn" class="text-secondary hover:text-primary focus:outline-none">
                    <i data-lucide="menu" class="w-8 h-8"></i>
                </button>
            </div>
        </div>
    </div>

    <!-- Mobile Menu Panel -->
    <div id="mobile-menu" class="hidden md:hidden bg-white border-t border-gray-100 absolute w-full">
        <div class="px-4 pt-2 pb-6 space-y-2 shadow-lg">
            {navLinks.map(link => (
                <a 
                    href={link.href} 
                    class={`block px-3 py-3 rounded-md text-base font-medium ${
                        currentPath === link.href 
                            ? 'bg-primary/10 text-primary' 
                            : 'text-secondary hover:bg-accent hover:text-primary'
                    }`}
                >
                    {link.label}
                </a>
            ))}
            <a href={whatsappUrl} target="_blank" class="block mt-4 text-center w-full bg-primary text-white px-5 py-3 rounded font-heading font-bold">
                Hubungi Kami
            </a>
        </div>
    </div>
</nav>

<script>
    // Navbar scroll effect
    const navbar = document.getElementById('navbar');
    window.addEventListener('scroll', () => {
        if (window.scrollY > 50) navbar?.classList.add('shadow-md', 'bg-white/95', 'backdrop-blur-sm');
        else navbar?.classList.remove('backdrop-blur-sm');
    });

    // Mobile menu toggle
    const mobileBtn = document.getElementById('mobile-menu-btn');
    const mobileMenu = document.getElementById('mobile-menu');
    mobileBtn?.addEventListener('click', () => mobileMenu?.classList.toggle('hidden'));
    document.querySelectorAll('#mobile-menu a').forEach(link => 
        link.addEventListener('click', () => mobileMenu?.classList.add('hidden'))
    );
</script>
