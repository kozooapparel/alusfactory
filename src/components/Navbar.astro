---
const whatsappUrl = "https://wa.me/628112230558";

// Get current path to highlight active nav
const currentPath = Astro.url.pathname;

const navLinks = [
    { href: "/", label: "Home" },
    { href: "/tentang", label: "Tentang Kami" },
    { href: "/produk", label: "Produk" },
    { href: "/galeri", label: "Galeri" },
];
---

<nav class="fixed w-full z-50 bg-white shadow-md transition-all duration-300" id="navbar">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="flex justify-between items-center h-20">
            <!-- Logo -->
            <a href="/" class="flex-shrink-0 flex items-center gap-2 cursor-pointer">
                <img src="https://placehold.co/150x50/0197B2/white?text=LOGO+ANDA" alt="Alus Factory Logo" class="h-10 w-auto object-contain">
                <span class="font-heading font-bold text-2xl text-secondary tracking-tight">ALUS<span class="text-primary">FACTORY</span></span>
            </a>

            <!-- Desktop Menu -->
            <div class="hidden md:flex space-x-8 items-center">
                {navLinks.map(link => (
                    <a 
                        href={link.href} 
                        class={`font-medium transition ${
                            currentPath === link.href || (currentPath === '/' && link.href === '/') 
                                ? 'text-primary' 
                                : 'text-secondary hover:text-primary'
                        }`}
                    >
                        {link.label}
                    </a>
                ))}
                <a href={whatsappUrl} target="_blank" class="bg-primary text-white px-5 py-2.5 rounded hover:bg-opacity-90 transition font-heading font-semibold shadow-lg shadow-primary/30">
                    Hubungi Kami
                </a>
            </div>

            <!-- Mobile Menu Button -->
            <div class="md:hidden flex items-center">
                <button id="mobile-menu-btn" class="text-secondary hover:text-primary focus:outline-none p-2" aria-label="Toggle menu">
                    <svg id="menu-icon-open" class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
                    </svg>
                    <svg id="menu-icon-close" class="w-8 h-8 hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
            </div>
        </div>
    </div>

    <!-- Mobile Menu Panel -->
    <div id="mobile-menu" class="hidden md:hidden bg-white border-t border-gray-100 absolute w-full left-0 top-20 shadow-xl">
        <div class="px-4 pt-4 pb-6 space-y-2">
            {navLinks.map(link => (
                <a 
                    href={link.href} 
                    class={`flex items-center gap-3 px-4 py-3 rounded-lg text-base font-medium transition-colors ${
                        currentPath === link.href 
                            ? 'bg-primary text-white' 
                            : 'text-secondary hover:bg-accent hover:text-primary'
                    }`}
                >
                    {link.label}
                </a>
            ))}
            <div class="pt-4 border-t border-gray-100 mt-4">
                <a href={whatsappUrl} target="_blank" class="flex items-center justify-center gap-2 w-full bg-primary text-white px-5 py-4 rounded-lg font-heading font-bold text-lg">
                    <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M12.04 2C6.48 2 2 6.48 2 12.04C2 13.82 2.47 15.52 3.33 17L2.07 22L7.22 20.65C8.64 21.43 10.31 21.89 12.04 21.89C17.6 21.89 22.08 17.41 22.08 11.85C22.08 6.4 17.6 2 12.04 2Z"/>
                    </svg>
                    Hubungi Kami
                </a>
            </div>
        </div>
    </div>
</nav>

<script>
    // Navbar scroll effect
    const navbar = document.getElementById('navbar');
    window.addEventListener('scroll', () => {
        if (window.scrollY > 50) navbar?.classList.add('shadow-md', 'bg-white/95', 'backdrop-blur-sm');
        else navbar?.classList.remove('backdrop-blur-sm');
    });

    // Mobile menu toggle
    const mobileBtn = document.getElementById('mobile-menu-btn');
    const mobileMenu = document.getElementById('mobile-menu');
    const menuIconOpen = document.getElementById('menu-icon-open');
    const menuIconClose = document.getElementById('menu-icon-close');
    
    mobileBtn?.addEventListener('click', () => {
        const isHidden = mobileMenu?.classList.contains('hidden');
        mobileMenu?.classList.toggle('hidden');
        menuIconOpen?.classList.toggle('hidden');
        menuIconClose?.classList.toggle('hidden');
    });
    
    document.querySelectorAll('#mobile-menu a').forEach(link => 
        link.addEventListener('click', () => {
            mobileMenu?.classList.add('hidden');
            menuIconOpen?.classList.remove('hidden');
            menuIconClose?.classList.add('hidden');
        })
    );
</script>
